{
  "version": "0.1",
  "behavior_id": "sparks",
  "description": "Transient-driven bursts for attack emphasis",
  "emission": {
    "mode": "continuous",
    "rate": 10,
    "burst": { "enabled": true, "trigger": "audio_peak", "count": 18, "cooldown_ms": 90 },
    "initial_state": {
      "velocity": { "type": "radial", "min": 0.05, "max": 0.14 },
      "energy": 1.0,
      "size": { "min": 0.35, "max": 0.8 }
    }
  },
  "forces": [
    { "type": "curl_noise", "strength": 0.4, "scale": 0.7, "time_scale": 0.25, "modulate_by": "audio_rms" },
    { "type": "drag", "coefficient": 0.86 }
  ],
  "modulation": {
    "audio_inputs": {
      "rms": { "smoothing_ms": 40, "clamp": [0.0, 1.0] },
      "peak": { "smoothing_ms": 12, "threshold": 0.6 }
    },
    "bindings": [
      { "source": "rms", "target": "curl_noise.strength", "mode": "range", "range": [0.3, 0.7] },
      { "source": "peak", "target": "emission.burst", "mode": "trigger" }
    ]
  },
  "lifecycle": {
    "lifetime_ms": { "min": 500, "max": 1200 },
    "energy_decay": { "type": "exponential", "rate": 1.1 },
    "size_decay": { "type": "linear", "rate": 0.3 }
  },
  "stability": {
    "max_particles": 260,
    "max_velocity": 2.8,
    "force_clamp": 1.3,
    "bounds": { "mode": "soft", "margin": 28 }
  }
}