{
  "scenario_version": "1.0",
  "id": "monument_parameter_smoothing_contract",
  "name": "Monument Parameter Smoothing Contract",
  "category": "reverb",
  "description": "Stress scenario for parameter smoothing under dense automation. Exercises high-impact reverb controls with overlapping envelope ramps and validates stability, bounded discontinuities, and DC safety.",
  "capability_requirements": {
    "required_effect_types": [
      "REVERB"
    ],
    "required_behaviors": [
      "STATEFUL"
    ],
    "excluded_behaviors": [],
    "notes": "Smoothing contract for rapid parameter changes"
  },
  "stimulus": {
    "stimulus_id": "noise",
    "stimulus_variant": "white",
    "parameters": {
      "amplitude": 0.25,
      "duration_seconds": 6.0,
      "seed": 42
    }
  },
  "parameter_variations": {
    "0": 0.85,
    "1": 0.45,
    "2": 0.5,
    "3": 0.5,
    "4": 0.5,
    "5": 0.5,
    "6": 0.5,
    "7": 0.5,
    "8": 0.5
  },
  "parameter_automation": [
    {
      "parameter_index": 1,
      "type": "envelope",
      "points": [
        { "time": 0.0, "value": 0.15 },
        { "time": 0.6, "value": 0.85 },
        { "time": 1.2, "value": 0.25 },
        { "time": 1.8, "value": 0.9 },
        { "time": 2.4, "value": 0.35 },
        { "time": 3.0, "value": 0.75 },
        { "time": 3.6, "value": 0.2 },
        { "time": 4.2, "value": 0.8 },
        { "time": 4.8, "value": 0.4 },
        { "time": 5.4, "value": 0.7 },
        { "time": 6.0, "value": 0.5 }
      ]
    },
    {
      "parameter_index": 2,
      "type": "envelope",
      "points": [
        { "time": 0.0, "value": 0.8 },
        { "time": 0.5, "value": 0.2 },
        { "time": 1.0, "value": 0.7 },
        { "time": 1.5, "value": 0.3 },
        { "time": 2.0, "value": 0.9 },
        { "time": 2.5, "value": 0.2 },
        { "time": 3.0, "value": 0.8 },
        { "time": 3.5, "value": 0.35 },
        { "time": 4.0, "value": 0.75 },
        { "time": 4.5, "value": 0.25 },
        { "time": 5.0, "value": 0.7 },
        { "time": 6.0, "value": 0.5 }
      ]
    },
    {
      "parameter_index": 3,
      "type": "envelope",
      "points": [
        { "time": 0.0, "value": 0.25 },
        { "time": 0.75, "value": 0.85 },
        { "time": 1.5, "value": 0.3 },
        { "time": 2.25, "value": 0.8 },
        { "time": 3.0, "value": 0.2 },
        { "time": 3.75, "value": 0.9 },
        { "time": 4.5, "value": 0.35 },
        { "time": 5.25, "value": 0.75 },
        { "time": 6.0, "value": 0.5 }
      ]
    },
    {
      "parameter_index": 5,
      "type": "lfo",
      "waveform": "triangle",
      "rate_hz": 1.5,
      "min_value": 0.1,
      "max_value": 0.9
    }
  ],
  "analysis_windows": {
    "steady": {
      "type": "time_range",
      "start_seconds": 0.5,
      "end_seconds": 6.0
    }
  },
  "expected_invariants": {
    "no_nan_inf": {
      "metric": "non_finite",
      "window": "full",
      "threshold": {
        "max_count": 0,
        "max": 0
      },
      "severity": "hard_fail",
      "description": "Automation must not create NaN/Inf"
    },
    "reasonable_peak": {
      "metric": "peak_level",
      "window": "steady",
      "threshold": {
        "peak_dbfs_max": -0.3
      },
      "severity": "soft_warn",
      "description": "Peak level should remain bounded under automation"
    },
    "bounded_energy": {
      "metric": "rms_energy",
      "window": "steady",
      "threshold": {
        "min_db": -55.0,
        "max_db": -6.0
      },
      "severity": "soft_warn",
      "description": "Energy remains in expected band during rapid sweeps"
    },
    "discontinuities_controlled": {
      "metric": "discontinuity_count",
      "window": "steady",
      "threshold": {
        "max_count": 1200,
        "max": 1200.0
      },
      "severity": "soft_warn",
      "description": "Parameter smoothing should limit abrupt discontinuities"
    },
    "dc_stability": {
      "metric": "dc_offset",
      "window": "steady",
      "threshold": {
        "min": -0.02,
        "max": 0.02
      },
      "severity": "soft_warn",
      "description": "Automation should not introduce significant DC bias"
    }
  },
  "threshold_preset": "reverb_architecture",
  "baseline_tracking": {
    "enabled": true
  },
  "pass_criteria": "Rapid automation remains stable, finite, and bounded without severe zipper artifacts"
}
